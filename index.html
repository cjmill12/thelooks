<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hairstyle Virtual Try-On</title>
    
    <style>
/* --- Global Colors --- */
:root {
    --primary-color: #1D2124; 
    --text-on-dark: #FFFFFF; 
    --background-color: #f4f7f6;
    --text-color: #333; 
    --highlight-color: #28a745; 
    --thumbnail-size: 60px;
    --gallery-gap: 10px; 
    --header-height: 40px;
    --viewport-size-desktop: 300px; 
    --viewport-size-mobile: 250px; 
    --content-max-width: 400px; 
}

body {
    font-family: Arial, sans-serif;
    background-color: var(--background-color);
    color: var(--text-color);
    margin: 0;
    padding: 0; 
    text-align: center;
    -webkit-user-select: none;
    user-select: none;
    overflow-x: hidden; 
    display: flex;
    flex-direction: column;
    min-height: 100vh;
}

/* --- Header and Logo Styling (MINIMAL BANNER) --- */
#app-header {
    padding: 0; 
    background-color: #FFFFFF;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05); 
    height: var(--header-height); 
    display: flex;
    align-items: center;
    justify-content: center;
    position: sticky; 
    top: 0;
    z-index: 100;
}
#main-logo {
    max-width: 100px !important; 
    height: 35px !important; 
    object-fit: contain; 
}

/* ================================================== */
/* NEW SINGLE-COLUMN LAYOUT */
/* ================================================== */

#main-app-container {
    flex-grow: 1; 
    width: 100%;
    padding: 20px 0;
    margin: 0 auto; 
    display: flex;
    flex-direction: column;
    align-items: center; 
    gap: 20px; 
}

/* --- 1. GENDER BUTTONS (Top Section) --- */
.gender-buttons-container {
    display: flex;
    justify-content: space-between;
    gap: 8px;
    width: 90%; 
    max-width: var(--content-max-width);
    margin-bottom: 0;
    box-sizing: border-box;
}

.gender-button {
    flex-grow: 1;
    padding: 10px 15px;
    border: 1px solid #ccc;
    background-color: #f9f9f9;
    color: var(--text-color);
    border-radius: 8px;
    cursor: pointer;
    font-size: 0.9em;
    font-weight: bold;
    text-align: center;
    transition: all 0.2s;
    user-select: none;
    line-height: 1;
}

.gender-button:hover {
    background-color: #f0f0f0;
}

.gender-button.selected {
    background-color: var(--primary-color);
    color: var(--text-on-dark);
    border-color: var(--primary-color);
}


/* --- 2. CAMERA SECTION (Middle Section) --- */

#central-section {
    width: 90%;
    max-width: var(--content-max-width);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 15px;
}

#central-viewport {
    position: relative; 
    /* CRITICAL: Use !important to override browser defaults */
    width: var(--viewport-size-mobile) !important; 
    height: var(--viewport-size-mobile) !important;
    max-width: var(--viewport-size-desktop) !important; 
    max-height: var(--viewport-size-desktop) !important;
    margin: 0; 
    border-radius: 6px; 
    overflow: hidden;
    background-color: #eee;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); 
    
    display: none; 
    align-items: center;
    justify-content: center;
}

#central-viewport.active {
    display: flex;
}

#video-feed, #ai-result {
    width: 100% !important;
    height: 100% !important; 
    display: block;
    /* CRITICAL: Force containment */
    object-fit: cover !important; 
    max-width: 100% !important;
    max-height: 100% !important;
    /* Prevent default full screen behavior in some browsers */
    z-index: 1; 
}

/* Ensure no other hidden video controls interfere */
#video-feed::-webkit-media-controls {
    display: none !important;
}

#status-message {
    position: absolute;
    bottom: 0;
    width: 100%;
    background: rgba(0, 0, 0, 0.6);
    color: white;
    padding: 8px 5px;
    margin: 0;
    font-size: 0.85em;
    text-align: center;
    z-index: 100; 
}

#controls {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    max-width: 400px;
}

.main-action-btn {
    margin-bottom: 10px;
    cursor: pointer;
    border: none;
    font-size: 16px; 
    transition: all 0.2s;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15); 
}

#take-selfie-btn {
    width: 70px; 
    height: 70px;
    padding: 0;
    border-radius: 50%; 
    background-color: var(--primary-color);
    color: var(--text-on-dark);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 30px; 
    line-height: 1;
}

/* Try On Hairstyle Button Styling */
#try-on-btn {
    width: 100%; 
    max-width: 400px;
    padding: 12px 24px;
    border-radius: 8px;
    background-color: var(--highlight-color); 
    color: var(--text-on-dark);
    font-size: 1.1em;
    font-weight: bold;
    box-shadow: 0 4px 8px rgba(40, 167, 69, 0.3);
    margin-top: 15px; 
}

/* --- 3. FILTER SECTION (Bottom Section) --- */

#filter-section-wrapper {
    width: 90%;
    max-width: var(--content-max-width);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
}

.filter-section {
    width: 100%;
    margin: 0; 
    padding: 0;
    background-color: #fff;
    border-radius: 6px;
    text-align: left; 
}

/* Accordion Button/Header Style */
.filter-section h3 {
    font-size: 0.9em; 
    font-weight: bold;
    margin: 0; 
    padding: 8px 10px;
    text-transform: uppercase;
    display: flex;
    justify-content: space-between; 
    align-items: center;
    cursor: pointer;
    background-color: #fff;
    border-radius: 6px;
    transition: all 0.2s ease-in-out;
}

/* --- COLLAPSED (Pill Appearance) --- */
.filter-section.collapsed h3 {
    background-color: #f0f0f0; 
    color: #666;
    border-radius: 20px; 
    height: 40px; 
    width: 90%; 
    max-width: 100%; 
    padding: 0 10px; 
    justify-content: center;
    overflow: hidden; 
    margin: 0 auto; 
}

/* Ensure the full text is visible when collapsed */
.filter-section.collapsed h3 span {
    display: inline;
    font-size: 1.0em; 
    line-height: 40px; 
}

/* Hide the caret icon for collapsed buttons */
.filter-section.collapsed h3::after {
    content: none;
}

/* --- EXPANDED (Active Pill/Block Appearance) --- */
.filter-section.expanded h3 {
    background-color: var(--primary-color); 
    color: var(--text-on-dark);
    border-radius: 6px 6px 0 0; 
    height: auto;
    width: 100%;
    padding: 8px 10px;
    margin: 0;
    justify-content: space-between; 
}

/* Caret Icon for Collapse/Expand */
.filter-section h3::after {
    content: '‚ñ∂'; 
    font-size: 0.8em;
    margin-left: 5px;
    transition: transform 0.2s;
    line-height: 1;
}

.filter-section.expanded h3::after {
    content: '‚ñº'; 
    color: var(--text-on-dark);
}

/* Hiding the content group when collapsed */
.filter-content-group {
    padding: 5px 10px 10px 10px;
    background-color: #f9f9f9;
    border-radius: 0 0 6px 6px;
}

.filter-section.collapsed .filter-content-group {
    display: none;
}


/* Filter options group */
.filter-options-group {
    display: flex;
    flex-wrap: wrap; 
    gap: 8px; 
    justify-content: flex-start; 
    margin-top: 5px; 
}

/* Complexion Tiles (Circular & Compact) */
#complexion-options-group {
    justify-content: flex-start; 
    gap: 6px; 
}

.complexion-tile {
    width: 30px; 
    height: 30px; 
    border: 2px solid transparent; 
    flex-shrink: 0; 
    border-radius: 50%;
}

.complexion-tile p {
    display: none; 
}

.complexion-tile.selected {
    border-color: var(--highlight-color);
    box-shadow: 0 0 5px rgba(40, 167, 69, 0.5); 
}

/* --- Hairstyle Gallery (INSPIRATION) --- */
#hairstyle-gallery {
    padding: 0;
    width: 100%; 
}
#hairstyle-gallery .filter-content-group {
     padding: 10px 5px; 
}
/* FIX FOR HORIZONTAL SCROLL */
#hairstyle-gallery .filter-options-group {
    display: flex; 
    flex-wrap: nowrap; 
    white-space: nowrap; 
    overflow-x: scroll; 
    overflow-y: hidden; 
    scroll-snap-type: x mandatory;
    gap: 8px;
    padding-bottom: 5px; 
    padding-left: 5px;
    padding-right: 5px;
}

.style-option {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    width: 45px;
    flex-shrink: 0;
    border: 2px solid transparent; 
    transition: border-color 0.2s;
}

.style-option.selected {
    border-color: var(--highlight-color);
    border-radius: 8px;
    box-shadow: 0 0 5px rgba(40, 167, 69, 0.5); 
}


.style-thumbnail {
    width: 45px; 
    height: 45px; 
    border-radius: 6px;
    object-fit: cover;
}

.style-option p {
    font-size: 0.75em;
    white-space: normal;
    word-break: break-word;
    margin: 4px 0 0 0;
}

/* ================================================== */
/* üì± MOBILE MEDIA QUERY OPTIMIZATIONS */
/* ================================================== */

@media (max-width: 600px) {
    
    #main-app-container {
        padding: 10px 0;
        gap: 15px; 
    }
    
    .gender-buttons-container,
    #central-section,
    #filter-section-wrapper {
        width: 95%; 
        max-width: 95%;
        box-sizing: border-box;
        padding: 0 10px;
    }
    
    /* CRITICAL: Ensure square viewport is mobile-friendly */
    #central-viewport {
        width: 80vw !important; 
        height: 80vw !important;
        max-width: 300px !important; 
        max-height: 300px !important;
    }
    
    /* Mobile filter styles adjustments */
    .filter-section.collapsed h3 {
        width: 95%; 
    }

    /* Complexion tiles must show text labels on mobile */
    #complexion-options-group {
        justify-content: space-around;
        flex-wrap: nowrap;
        overflow-x: scroll;
        padding-bottom: 5px;
        padding-top: 5px;
        scroll-snap-type: x mandatory;
    }

    .complexion-tile {
        width: 40px; 
        height: 40px; 
        flex-shrink: 0;
        position: relative;
    }
    .complexion-tile p {
        display: block; 
        font-size: 0.6em;
        position: absolute;
        top: 100%; 
        left: 50%;
        transform: translateX(-50%);
        margin-top: 5px; 
        width: 60px;
    }
    
    /* INSPIRATION GALLERY OPTIMIZATION */
    #hairstyle-gallery .filter-options-group {
        padding-left: 10px;
        padding-right: 10px;
    }
    
    .style-option {
        width: 65px; 
        flex-shrink: 0;
    }
    .style-thumbnail {
        width: 65px; 
        height: 65px; 
    }

    .style-option p {
        font-size: 0.8em;
    }
}
    </style>
</head>
<body>
    <div id="app-header">
        <img id="main-logo" src="logo.png" alt="Looks Logo">
    </div>

    <div id="main-app-container">
        
        <div class="gender-buttons-container">
            <button id="male-gender-btn" class="gender-button">Male</button>
            <button id="female-gender-btn" class="gender-button">Female</button>
        </div>

        <div id="central-section">
            <div id="central-viewport">
                <video id="video-feed" autoplay playsinline></video>
                <img id="ai-result" style="display: none;" src="" alt="AI Hairstyle Result">
                <p id="status-message">Click the Play button to start your camera.</p>
            </div>
            
            <div id="controls">
                <button id="take-selfie-btn" class="main-action-btn">‚ñ∂Ô∏è</button>
                <div id="loading-spinner" class="spinner"></div>
            </div>
        </div>


        <div id="filter-section-wrapper">
            
            <div id="complexion-selector" class="filter-section collapsed">
                <h3><span>Complexion</span><span class="icon"></span></h3>
                <div class="filter-content-group">
                    <div id="complexion-options-group" class="filter-options-group">
                        <div class="complexion-tile" style="background-color: #F8D7BE;" data-complexion="Light"></div>
                        <div class="complexion-tile" style="background-color: #D6A476;" data-complexion="Medium"></div>
                        <div class="complexion-tile" style="background-color: #A97A52;" data-complexion="Dark"></div>
                        <div class="complexion-tile" style="background-color: #6A3E26;" data-complexion="Deep"></div>
                    </div>
                </div>
            </div>

            <div id="hairstyle-gallery" class="filter-section expanded">
                <h3><span>Hairstyle Inspiration</span><span class="icon"></span></h3>
                <div class="filter-content-group">
                    <div class="filter-options-group">
                        
                        <div class="style-option" data-prompt="a slicked-back undercut with brushed up blonde hair">
                            <img class="style-thumbnail" src="styles/brushed up blonde.jpeg" alt="Brushed Up Blonde">
                            <p>Brushed Up Blonde</p>
                        </div>
                        
                        <div class="style-option" data-prompt="a short cut with a heavy forward fringe">
                            <img class="style-thumbnail" src="styles/forward fringe.jpeg" alt="Forward Fringe">
                            <p>Forward Fringe</p>
                        </div>
                        
                        <div class="style-option" data-prompt="a classic high top fade with sharp lines">
                            <img class="style-thumbnail" src="styles/high top fade.jpeg" alt="High Top Fade">
                            <p>High Top Fade</p>
                        </div>
                        
                        <div class="style-option" data-prompt="a voluminous hairstyle with natural curls">
                            <img class="style-thumbnail" src="styles/natural curls.jpeg" alt="Natural Curls">
                            <p>Natural Curls</p>
                        </div>
                        
                        <div class="style-option" data-prompt="a clean side swept scissor cut">
                            <img class="style-thumbnail" src="styles/side swept scissor cut.jpeg" alt="Side Swept Scissor Cut">
                            <p>Side Swept Scissor Cut</p>
                        </div>
                        
                        <div class="style-option" data-prompt="a sleek, formal side part style">
                            <img class="style-thumbnail" src="styles/sleek side part.jpeg" alt="Sleek Side Part">
                            <p>Sleek Side Part</p>
                        </div>
                        
                        <div class="style-option" data-prompt="a fun, short spiked hairstyle">
                            <img class="style-thumbnail" src="styles/spiked charm.jpeg" alt="Spiked Charm">
                            <p>Spiked Charm</p>
                        </div>
                        
                        <div class="style-option" data-prompt="a short haircut with a tousled and textured top">
                            <img class="style-thumbnail" src="styles/tousled top.jpeg" alt="Tousled Top">
                            <p>Tousled Top</p>
                        </div>
                        
                        <div class="style-option" data-prompt="a modern wavy quiff with volume">
                            <img class="style-thumbnail" src="styles/wavy quiff.jpeg" alt="Wavy Quiff">
                            <p>Wavy Quiff</p>
                        </div>
                        
                    </div>
                </div>
            </div>
            
            <button id="try-on-btn" class="main-action-btn" style="display: none;">Generate My New Look</button>

        </div> </div> <canvas id="hidden-canvas" style="display: none;"></canvas>

    <script>
document.addEventListener('DOMContentLoaded', () => {
    // 1. Get DOM elements
    const videoFeed = document.getElementById('video-feed');
    const aiResultImg = document.getElementById('ai-result');
    const canvas = document.getElementById('hidden-canvas');
    const centralViewport = document.getElementById('central-viewport');
    
    // Buttons and Controls
    const takeSelfieBtn = document.getElementById('take-selfie-btn');
    const tryOnBtn = document.getElementById('try-on-btn');
    const spinner = document.getElementById('loading-spinner');
    
    const statusMessage = document.getElementById('status-message');
    
    // Filter elements 
    const complexionSelector = document.getElementById('complexion-selector');
    const complexionGroup = document.getElementById('complexion-options-group');
    const galleryContainer = document.getElementById('hairstyle-gallery'); 
    
    // New Gender Buttons
    const maleGenderBtn = document.getElementById('male-gender-btn');
    const femaleGenderBtn = document.getElementById('female-gender-btn');

    // State tracking variables
    let capturedImageBase64 = null; 
    let selectedPrompt = null; 
    let cameraStarted = false; 
    let selectedGender = 'Male'; // Set default gender
    let selectedComplexion = null;

    // --- CONSTANTS ---
    const NEGATIVE_PROMPT = "extra fingers, blurry, low resolution, bad hands, deformed face, mask artifact, bad blending, unnatural hair hair color, ugly, tiling, duplicate, abstract, cartoon, distorted pupils, bad lighting, cropped, grainy, noise, poor lighting, poor composition, low quality"; 

    // --- Helper Functions ---
    
    function updateTryOnButtonVisibility() {
        if (capturedImageBase64 && selectedPrompt && selectedComplexion) {
            tryOnBtn.style.display = 'block';
            tryOnBtn.disabled = false;
            if (statusMessage.textContent.includes('Processing')) {
                 // Do not overwrite key messages
            } else {
                 statusMessage.textContent = "All set! Click 'Generate My New Look' below.";
            }
        } else {
            tryOnBtn.style.display = 'none';
        }
    }

    function handleGenderSelect(gender) {
        selectedGender = gender;
        maleGenderBtn.classList.remove('selected');
        femaleGenderBtn.classList.remove('selected');
        if (gender === 'Male') {
            maleGenderBtn.classList.add('selected');
        } else if (gender === 'Female') {
            femaleGenderBtn.classList.add('selected');
        }
        updateTryOnButtonVisibility();
    }

    function toggleFilterSection(section) {
        if (section.classList.contains('collapsed')) {
            section.classList.remove('collapsed');
            section.classList.add('expanded');
        } else {
            section.classList.remove('expanded');
            section.classList.add('collapsed');
        }
    }
    
    function handleComplexionSelect(tile) {
        const complexionTiles = complexionGroup.querySelectorAll('.complexion-tile');
        complexionTiles.forEach(t => t.classList.remove('selected'));
        tile.classList.add('selected');
        selectedComplexion = tile.dataset.complexion;
        updateTryOnButtonVisibility(); 
    }
    
    function handleStyleSelect(styleOption) {
        const styleOptions = galleryContainer.querySelectorAll('.style-option');
        styleOptions.forEach(o => o.classList.remove('selected'));
        
        styleOption.classList.add('selected'); 
        selectedPrompt = styleOption.dataset.prompt;
        
        updateTryOnButtonVisibility(); 
        
        if (capturedImageBase64) {
             statusMessage.textContent = `Style selected. Choose a complexion to unlock the 'Generate' button.`;
        }
    }
    
    // Function to start camera stream (CRITICAL JS FIX)
    async function startCamera() {
        try {
            // Explicit constraints to favor smaller, constrained video output
            const constraints = { 
                video: {
                    facingMode: 'user', // Use front camera
                    width: { ideal: 250 }, 
                    height: { ideal: 250 }
                }
            };
            const stream = await navigator.mediaDevices.getUserMedia(constraints);
            videoFeed.srcObject = stream;
            cameraStarted = true;
            
            // IMPORTANT: Add 'playsinline' attribute to prevent full-screen takeover on iOS
            videoFeed.setAttribute('playsinline', '');
            
            centralViewport.classList.add('active'); 
            aiResultImg.style.display = 'none'; 
            videoFeed.style.display = 'block'; 
            
            takeSelfieBtn.textContent = "üì∏"; 
            statusMessage.textContent = "Adjust your face in the box, then click üì∏ to capture.";
            
            tryOnBtn.style.display = 'none';

        } catch (error) {
            console.error('Error accessing camera:', error);
            statusMessage.textContent = `Error: Could not start camera. Check permissions. (${error.name})`;
            
            takeSelfieBtn.textContent = "‚ñ∂Ô∏è";
            centralViewport.classList.remove('active');
        }
    }
    
    function stopCamera() {
        if (videoFeed.srcObject) {
            videoFeed.srcObject.getTracks().forEach(track => track.stop());
            videoFeed.srcObject = null;
        }
        cameraStarted = false;
    }
    
    function captureImage() {
        const context = canvas.getContext('2d');
        // Use the size of the video element to prevent distortion on capture
        const width = videoFeed.videoWidth || centralViewport.offsetWidth;
        const height = videoFeed.videoHeight || centralViewport.offsetHeight;

        canvas.width = width;
        canvas.height = height;
        context.drawImage(videoFeed, 0, 0, width, height);

        capturedImageBase64 = canvas.toDataURL('image/jpeg').split(',')[1];
        
        videoFeed.style.display = 'none'; 
        aiResultImg.style.display = 'block';
        aiResultImg.src = canvas.toDataURL('image/jpeg');
        
        stopCamera();
        
        statusMessage.textContent = "Image captured. Select a hairstyle and complexion, then click 'Generate'.";
        
        takeSelfieBtn.style.display = 'none';
        
        updateTryOnButtonVisibility(); 
    }
    
    // Try On button logic (Updated button text)
    tryOnBtn.addEventListener('click', async () => {
        if (!capturedImageBase64 || !selectedPrompt || !selectedComplexion) {
            statusMessage.textContent = "Please capture a selfie, select a style, and choose a complexion first.";
            return;
        }

        tryOnBtn.disabled = true;
        tryOnBtn.style.display = 'none';
        spinner.style.display = 'block';
        statusMessage.textContent = "Processing your new look... This may take a moment.";
        
        const finalPrompt = `A high quality, professional studio portrait of a ${selectedGender} model with a ${selectedComplexion} complexion, featuring a new hairstyle: ${selectedPrompt}. The face should be clear and well-lit.`;
        
        try {
            const response = await fetch('/api/run_model', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    image: capturedImageBase64,
                    prompt: finalPrompt,
                    negativePrompt: NEGATIVE_PROMPT 
                })
            });

            if (!response.ok) {
                const errorData = await response.json();
                throw new Error(errorData.error || `HTTP error! Status: ${response.status}`);
            }

            const data = await response.json();
            
            // --- SUCCESS BLOCK ---
            aiResultImg.src = `data:image/jpeg;base64,${data.generatedImageBase64}`;
            aiResultImg.style.display = 'block';
            videoFeed.style.display = 'none';
            
            statusMessage.textContent = `Success! Your new look is ready. Click the Play button to start a new session.`;
            
            takeSelfieBtn.style.display = 'block'; 
            takeSelfieBtn.textContent = "‚ñ∂Ô∏è"; 
            
            spinner.style.display = 'none'; 
            tryOnBtn.style.display = 'none';
            
        } catch (error) {
            // --- ERROR BLOCK ---
            console.error('AI Processing Error:', error);
            statusMessage.textContent = `Error during AI try-on: ${error.message}. Please try again.`;
            
            tryOnBtn.disabled = false; 
            tryOnBtn.style.display = 'block'; 
            spinner.style.display = 'none'; 
            takeSelfieBtn.style.display = 'none'; 
        }
    });


    // --- INITIALIZATION and EVENT LISTENERS ---

    // Set initial gender selection
    if (maleGenderBtn) {
        handleGenderSelect('Male');
    }
    
    if (maleGenderBtn) {
        maleGenderBtn.addEventListener('click', () => handleGenderSelect('Male'));
    }

    if (femaleGenderBtn) {
        femaleGenderBtn.addEventListener('click', () => handleGenderSelect('Female'));
    }

    // Filter toggle listeners
    if (complexionSelector) {
        complexionSelector.querySelector('h3').addEventListener('click', () => toggleFilterSection(complexionSelector));
    }
    if (galleryContainer) {
        galleryContainer.querySelector('h3').addEventListener('click', () => toggleFilterSection(galleryContainer));
    }

    // Complexion tile listeners
    if (complexionGroup) {
        complexionGroup.querySelectorAll('.complexion-tile').forEach(tile => {
            tile.addEventListener('click', () => handleComplexionSelect(tile));
        });
    }

    // Hairstyle option listeners
    if (galleryContainer) {
        galleryContainer.querySelectorAll('.style-option').forEach(option => {
            option.addEventListener('click', () => handleStyleSelect(option));
        });
    }

    // Camera/Selfie button logic
    takeSelfieBtn.addEventListener('click', () => {
        if (!cameraStarted) {
            startCamera();
        } else {
            captureImage();
        }
    });

    // Initial state setup 
    if (complexionSelector) complexionSelector.classList.add('collapsed');
    if (galleryContainer) galleryContainer.classList.add('expanded');
    
    takeSelfieBtn.textContent = "‚ñ∂Ô∏è";
    spinner.style.display = 'none';
    tryOnBtn.style.display = 'none';
    centralViewport.classList.add('active'); // Keep the box visible, showing status message
});
    </script>
</body>
</html>
